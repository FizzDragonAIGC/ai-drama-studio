# 🎭 AI换脸（Face Swap）Skill
> 来源：Roop/ReActor/InsightFace技术实践

---

## 📐 换脸技术概述

| 技术 | 原理 | 效果 |
|------|------|------|
| Roop | 单张参考换脸 | 快速简单 |
| ReActor | Roop增强版 | 更稳定 |
| InsightFace | 3D面部建模 | 角度适应 |
| FaceFusion | 融合技术 | 自然度高 |

---

## 🎯 主要应用场景

| 场景 | 说明 |
|------|------|
| 角色一致性 | 保持AI角色面部统一 |
| 表情迁移 | 将表情应用到角色 |
| 动态视频 | 视频换脸 |
| 快速测试 | 角色脸部快速替换 |

---

## 🎬 SD WebUI使用（Roop/ReActor）

### 安装
```
扩展商店搜索：
- sd-webui-roop
- sd-webui-reactor

安装后重启WebUI
```

### 基本使用
```
1. 上传参考人脸图（清晰正面）
2. 正常生成图片
3. 选择换脸模型
4. 生成时自动替换
```

### 参数设置
| 参数 | 说明 | 建议 |
|------|------|------|
| Face Restore | 面部修复 | 启用 |
| Face Restore Visibility | 修复强度 | 0.5-0.8 |
| Code Former Weight | 修复权重 | 0.5-0.7 |
| Upscaler | 放大器 | 按需 |

---

## 📋 参考图要求

### 理想的参考图
| 要素 | 要求 |
|------|------|
| 角度 | 正面或轻微偏转 |
| 光线 | 均匀无强烈阴影 |
| 分辨率 | 512×512以上 |
| 遮挡 | 无眼镜/口罩遮挡 |
| 表情 | 中性表情最佳 |

### 多参考图
```
复杂场景准备多张：
- 正面中性
- 微笑
- 侧面
提高不同角度的效果
```

---

## 🔧 番剧角色换脸流程

### 保持角色一致
```
【场景】生成的角色面部不一致

【步骤】
1. 选择最满意的一张作为参考
2. 裁剪出面部区域
3. 后续生成时开启换脸
4. 所有图像共用同一参考
```

### 表情控制
```
【场景】需要特定表情

【方法1】
找/生成目标表情的参考图
换脸时表情也会迁移

【方法2】
结合Inpainting
先换脸再微调表情
```

### 多角色处理
```
【场景】一图多人

【设置】
- 启用多人脸检测
- 分别指定每张脸的参考
- 按位置顺序匹配
```

---

## 🎨 效果优化

### 融合度调整
```
过于生硬：
- 降低换脸强度
- 增加Face Restore
- 后期Inpaint微调边缘

过于模糊：
- 提高分辨率
- 使用高质量参考图
- 启用面部放大
```

### 光线匹配
```
【问题】换脸后光线不自然

【解决】
- 选择光线相似的参考图
- 后期调整阴影
- 使用Inpaint修复
```

---

## ⚡ 视频换脸

### 工具选择
| 工具 | 特点 |
|------|------|
| Roop-Unleashed | 视频支持 |
| DeepFaceLab | 专业级 |
| FaceFusion | 实时换脸 |

### 基本流程
```
1. 提取视频帧
2. 批量换脸处理
3. 重新合成视频
4. 音频同步
```

---

## ⚠️ 伦理与安全

### 使用原则
```
✅ 允许
- 自己的创作角色
- 已获授权的内容
- 虚构人物创作
- 艺术和教育用途

❌ 禁止
- 未经授权使用他人肖像
- 伪造/误导内容
- 恶意使用
```

### 平台规则
```
各平台对换脸有不同规定
使用前了解相关政策
避免违规
```

---

## 💡 替代方案

### IP-Adapter Face
```
不直接换脸，而是参考面部特征
生成相似但不同的面孔
更安全的一致性方案
```

### LoRA训练
```
训练角色LoRA
从根本解决一致性
无需每次换脸
```

---

## 📋 常见问题

| 问题 | 解决 |
|------|------|
| 融合不自然 | 优化参考图质量 |
| 角度不匹配 | 使用对应角度参考 |
| 表情僵硬 | 降低换脸强度 |
| 光线不对 | 后期调整阴影 |

---

*Skill版本: 1.0*
*适用: Stable Diffusion + Roop/ReActor*
*创建时间: 2026-02-14*
