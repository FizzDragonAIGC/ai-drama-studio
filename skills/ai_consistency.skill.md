# 🎯 角色一致性控制 Skill
> 来源：AI绘画一致性最佳实践汇总

---

## 📐 一致性挑战

| 问题 | 表现 | 影响 |
|------|------|------|
| 面部漂移 | 每张脸都不同 | 角色不可辨认 |
| 服装变化 | 衣服细节改变 | 连续性断裂 |
| 体型波动 | 身材比例变化 | 视觉不协调 |
| 配色偏移 | 颜色不一致 | 风格不统一 |

---

## 🎯 解决方案矩阵

| 方法 | 难度 | 效果 | 适用场景 |
|------|------|------|----------|
| 详细描述锁定 | 低 | 中 | 快速测试 |
| 角色设定图 | 中 | 高 | 正式制作 |
| LoRA训练 | 高 | 最高 | 大型项目 |
| IP-Adapter | 中 | 高 | ComfyUI用户 |
| Seed控制 | 低 | 低-中 | 辅助手段 |

---

## 🎬 详细描述锁定法

### 角色描述模板
```
【角色ID卡】
名称：[角色名]
性别：[男/女]
年龄外观：[具体年龄段]
发型：[长度+颜色+样式]
发色：[具体颜色，如 #FF6B6B]
瞳色：[具体颜色]
肤色：[描述]
体型：[身高+体态]
标志性特征：[独特特点]
服装：[详细描述]
配饰：[列举]

AI Prompt核心词：
[将以上整合为固定短语]
```

### 示例
```
【角色：小樱】
AI核心短语：
"young woman with long pink hair and green eyes, 
slender figure, wearing red qipao dress with 
gold dragon embroidery, jade hairpin, 
gentle expression"

每次生成时使用完全相同的核心短语
```

---

## 📋 角色设定图（Character Sheet）

### 标准格式
```
character design sheet, turnaround,
[角色核心描述],
front view, side view, back view,
three-quarter view, full body,
white background, reference sheet,
anime character design, model sheet
```

### 生成后的使用
1. 生成设定图作为参考
2. 每次新图生成时附带设定图
3. 使用img2img或ControlNet引用
4. 保持描述词完全一致

---

## 🔧 技术方案详解

### LoRA训练
```
【训练数据准备】
- 收集20-50张角色图
- 统一裁剪尺寸（512x512或1024x1024）
- 标注每张图的特征

【训练参数】
- 步数：1000-2000
- 学习率：0.0001
- 触发词：设定唯一触发词

【使用】
加载LoRA + 触发词 = 一致角色
```

### IP-Adapter（ComfyUI）
```
【设置】
- 加载IP-Adapter模型
- 输入参考图像
- 调整权重（0.5-0.8）

【优势】
- 无需训练
- 即时生效
- 可调节强度
```

### 种子锁定
```
【原理】
相同种子 + 相同提示 = 相似结果

【限制】
- 姿势改变会影响
- 不同模型种子不通用
- 仅作辅助手段
```

---

## 🎨 分镜一致性流程

### 标准工作流
```
1. 设计阶段
   └── 生成角色设定图
   └── 确定核心描述词
   └── 选择固定种子

2. 生成阶段
   └── 始终使用相同核心描述
   └── 仅改变姿势/场景部分
   └── 使用ControlNet控制姿态

3. 质检阶段
   └── 对比设定图检查
   └── 修正偏差严重的帧
   └── 统一后期色调
```

---

## ⚡ 快速一致性检查清单

| 检查项 | ✓ |
|--------|---|
| 发型发色一致 | □ |
| 瞳色正确 | □ |
| 服装细节匹配 | □ |
| 体型比例稳定 | □ |
| 标志性特征保留 | □ |
| 肤色协调 | □ |
| 整体风格统一 | □ |

---

## 💡 平台特定方案

| 平台 | 推荐方案 |
|------|----------|
| Midjourney | --cref参数 + 固定描述 |
| Stable Diffusion | LoRA + ControlNet |
| Leonardo | Character Reference功能 |
| ComfyUI | IP-Adapter工作流 |
| DALL-E | 详细描述 + 参考图上传 |

---

## 📋 常见问题

| 问题 | 解决 |
|------|------|
| 脸型总变 | 添加脸型细节描述 |
| 眼睛颜色漂移 | 强调具体颜色代码 |
| 服装变样 | 使用设定图参考 |
| 姿势不同就变脸 | 考虑训练LoRA |

---

*Skill版本: 1.0*
*适用: 所有AI绘画平台*
*创建时间: 2026-02-14*
