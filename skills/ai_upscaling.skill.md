# 🔍 图像放大（Upscaling）Skill
> 来源：ESRGAN/Real-ESRGAN技术实践

---

## 📐 放大技术对比

| 技术 | 原理 | 效果 | 速度 |
|------|------|------|------|
| 传统插值 | 数学计算 | 模糊 | 快 |
| ESRGAN | 深度学习 | 清晰 | 中 |
| Real-ESRGAN | 真实退化模型 | 很好 | 中 |
| 4x-UltraSharp | 锐化增强 | 锐利 | 中 |
| Topaz AI | 商业方案 | 优秀 | 慢 |

---

## 🎯 常用放大模型

### Stable Diffusion集成
| 模型 | 适用 | 特点 |
|------|------|------|
| R-ESRGAN 4x+ | 通用 | 平衡 |
| R-ESRGAN 4x+ Anime6B | 动漫 | 动漫优化 |
| 4x-UltraSharp | 照片 | 锐利 |
| LDSR | 细节 | 慢但细腻 |
| SwinIR | 通用 | 新技术 |

### 选择建议
| 内容 | 推荐模型 |
|------|----------|
| 动漫角色 | Anime6B |
| 真实照片 | UltraSharp |
| 复杂场景 | LDSR |
| 快速预览 | R-ESRGAN 4x+ |

---

## 🎬 SD中的Upscale工作流

### Hi-Res Fix（生成时放大）
```
【设置】
Enable Hi-Res Fix: ✓
Upscaler: R-ESRGAN 4x+ Anime6B
Hi-Res Steps: 10-20
Denoising: 0.3-0.5

【效果】
生成时直接输出高分辨率
保持生成一致性
```

### Extras（后期放大）
```
【步骤】
1. 进入Extras标签
2. 上传图片
3. 选择Upscaler
4. 设置放大倍数
5. 处理
```

### img2img放大
```
【步骤】
1. 加载图片到img2img
2. 设置更高分辨率
3. Denoising: 0.2-0.4
4. 添加细节增强提示词

【优势】
可同时增加细节
```

---

## 📋 倍数与分辨率

### 常见放大场景
| 原始 | 目标 | 倍数 |
|------|------|------|
| 512×512 | 2048×2048 | 4x |
| 1024×1024 | 2048×2048 | 2x |
| 768×512 | 3072×2048 | 4x |

### 分阶段放大
```
超大尺寸建议分步：
512 → 1024 → 2048 → 4096
每步2x比一次8x效果更好
```

---

## 🔧 参数优化

### Tile处理（大图）
```
【问题】显存不足

【解决】
启用Tiled处理
Tile Size: 512-768
Overlap: 32-64

分块处理后自动拼接
```

### 面部增强
```
同时启用：
- GFPGAN: 0.5-0.8
- CodeFormer: 0.5-0.8

增强面部细节
修复模糊脸部
```

---

## 🎨 番剧制作应用

### 角色图放大
```
【流程】
1. 生成1024×1024角色图
2. Anime6B 2x放大
3. 启用面部增强
4. 输出2048×2048

【注意】
检查是否过度锐化
动漫风格避免过于写实的放大器
```

### 背景放大
```
【流程】
1. 生成背景图
2. 使用LDSR或SwinIR
3. 可配合img2img增加细节

【提示词】
highly detailed, intricate details,
sharp focus, high resolution
```

### 批量处理
```
【设置】
使用Batch处理
统一放大参数
输出到指定文件夹
```

---

## ⚡ 工具推荐

### 独立工具
| 工具 | 特点 | 平台 |
|------|------|------|
| Real-ESRGAN GUI | 免费开源 | Win/Mac/Linux |
| Topaz Photo AI | 商业最佳 | Win/Mac |
| Waifu2x | 动漫专用 | 在线/本地 |
| chaiNNer | 可视化流程 | 跨平台 |

### 在线服务
| 服务 | 限制 |
|------|------|
| Bigjpg | 免费有限制 |
| Let's Enhance | 需注册 |
| Waifu2x在线 | 完全免费 |

---

## ⚠️ 常见问题

| 问题 | 解决 |
|------|------|
| 显存不足 | 启用Tile处理 |
| 过度锐化 | 换用其他模型 |
| 失去风格 | 使用风格匹配的模型 |
| 伪影出现 | 降低放大倍数分步处理 |

---

## 💡 质量提升技巧

### 放大前处理
```
1. 去噪/降噪
2. 颜色校正
3. 对比度调整
```

### 放大后处理
```
1. 微调锐度
2. 局部修复
3. 整体色调统一
```

---

*Skill版本: 1.0*
*适用: Stable Diffusion及独立工具*
*创建时间: 2026-02-14*
