# 🎬 AI番剧制作系统 - 产品需求文档 (PRD)

**版本**: v2.0  
**作者**: 卓卓 & 小Pax  
**日期**: 2026-02-14  
**状态**: 开发中

---

## 📋 目录

1. [产品概述](#1-产品概述)
2. [目标用户](#2-目标用户)
3. [核心价值](#3-核心价值)
4. [系统架构](#4-系统架构)
5. [功能需求](#5-功能需求)
6. [用户流程](#6-用户流程)
7. [数据结构](#7-数据结构)
8. [技术方案](#8-技术方案)
9. [产品路线图](#9-产品路线图)
10. [成功指标](#10-成功指标)

---

## 1. 产品概述

### 1.1 一句话描述
> 将小说/故事自动转换为专业分镜表的AI协作系统

### 1.2 产品定位
- **不是**：视频生成工具
- **是**：前期制作（Pre-production）辅助系统
- **产出**：可直接用于拍摄/生成的分镜表 + Prompt

### 1.3 解决的问题
| 痛点 | 现状 | 我们的方案 |
|------|------|-----------|
| 分镜耗时 | 专业分镜师需要数天 | AI辅助，分钟级产出 |
| 多工种协调 | 导演、摄影、美术各自为战 | 部门制智能体，统一输出 |
| 长剧本处理 | 容易遗漏细节 | 分层处理，逐集展开 |
| 情绪把控 | 依赖经验 | 量化情绪曲线，可视化 |

---

## 2. 目标用户

### 2.1 主要用户
| 用户类型 | 场景 | 核心需求 |
|----------|------|----------|
| **AI视频创作者** | 用Runway/Sora生成短片 | 需要结构化Prompt |
| **独立动画师** | 一人制作番剧 | 需要完整分镜参考 |
| **网文作者** | 想把小说影视化 | 需要可视化呈现 |
| **影视学生** | 学习分镜/导演 | 需要专业方法论 |

### 2.2 用户故事
```
作为一个AI视频创作者，
我希望输入我的小说后，系统能自动生成每个镜头的Prompt，
这样我可以直接复制到Midjourney/Runway使用。
```

---

## 3. 核心价值

### 3.1 价值主张
```
故事 → 结构化分镜 → 可执行Prompt
        ↑
    （AI协作完成）
```

### 3.2 差异化优势
| 对比项 | 传统方式 | 我们 |
|--------|----------|------|
| 分镜速度 | 数天 | 数分钟 |
| 专业门槛 | 需要影视知识 | 系统内置专业逻辑 |
| 一致性 | 依赖个人经验 | 部门制协作，规则统一 |
| 可编辑性 | 改动成本高 | 实时编辑，立即重算 |

---

## 4. 系统架构

### 4.1 部门制设计

```
                    ┌─────────────┐
                    │  🎬 总导演   │
                    │ 风格统筹     │
                    │ 章节划分     │
                    └──────┬──────┘
                           │
        ┌──────────────────┼──────────────────┐
        │                  │                  │
        ▼                  ▼                  ▼
┌───────────────┐  ┌───────────────┐  ┌───────────────┐
│  📝 编剧部    │  │  🎨 美术部    │  │  📜 考据部    │
│ • 剧本结构    │  │ • 服装设计    │  │ • 历史顾问    │
│ • 情绪节拍    │  │ • 道具设计    │  │ • 文化背景    │
│ • 对白设计    │  │ • 场景设计    │  │ • 禁忌清单    │
└───────┬───────┘  └───────┬───────┘  └───────────────┘
        │                  │
        └────────┬─────────┘
                 ▼
        ┌───────────────┐
        │  🎥 导演部    │
        │ • 分镜设计    │
        │ • 摄影参数    │
        │ • 灯光设计    │
        │ • 调色方案    │
        │ • 表演指导    │
        └───────┬───────┘
                │
                ▼
        ┌───────────────┐
        │  🎵 音乐部    │
        │ • 主旋律      │
        │ • 副旋律      │
        │ • 环境音      │
        └───────────────┘
```

### 4.2 数据流

```
输入故事 (1-2万字)
    │
    ▼
┌─────────────────────────────────────┐
│  第一层：全局分析                    │
│  • 分章节（每章3-15分钟）            │
│  • 提取人物                          │
│  • 时代考据                          │
└─────────────────────────────────────┘
    │
    ▼ (用户选择某一集)
┌─────────────────────────────────────┐
│  第二层：详细制作                    │
│  • 编剧部：情绪节拍（60-80镜头）     │
│  • 美术部：人物/场景设定             │
│  • 导演部：分镜综合方案              │
│  • 音乐部：三轨配乐                  │
└─────────────────────────────────────┘
    │
    ▼
┌─────────────────────────────────────┐
│  输出                                │
│  • Excel (55+列)                     │
│  • JSON (结构化数据)                 │
│  • Prompt (可复制)                   │
└─────────────────────────────────────┘
```

---

## 5. 功能需求

### 5.1 P0 核心功能（必须有）

| 功能 | 描述 | 状态 |
|------|------|------|
| 故事输入 | 支持1-2万字长文本 | ✅ 已完成 |
| 自动分章 | 智能划分章节，每章3-15分钟 | ✅ 已完成 |
| 情绪分析 | 每5-10秒一个情绪节拍 | ✅ 已完成 |
| 三层分镜 | 叙事/戏剧/情绪分类 | ✅ 已完成 |
| 导演方案 | 分镜+摄影+灯光+调色+表演 | ✅ 已完成 |
| 音乐三轨 | 主旋律+副旋律+环境音 | ✅ 已完成 |
| Excel导出 | 55+列完整数据 | ✅ 已完成 |
| 可编辑 | 所有字段支持修改 | ✅ 已完成 |

### 5.2 P1 重要功能（应该有）

| 功能 | 描述 | 状态 |
|------|------|------|
| 真实AI分析 | 接入Claude/GPT做智能分析 | 🔜 待开发 |
| 智能分章 | 识别情节转折点切分 | 🔜 待开发 |
| 人物提取 | 从故事自动识别人物名 | 🔜 待开发 |
| 批量导出 | 一次导出所有集 | 🔜 待开发 |
| 导演风格库 | 更多风格模板 | 🔜 待开发 |

### 5.3 P2 增强功能（可以有）

| 功能 | 描述 | 状态 |
|------|------|------|
| 预览图生成 | 接入Midjourney生成参考图 | 📋 规划中 |
| 视频生成 | 接入Runway/Sora | 📋 规划中 |
| 配乐生成 | 接入Suno/Udio | 📋 规划中 |
| 项目保存 | 数据库持久化 | 📋 规划中 |
| 团队协作 | 多人编辑 | 📋 规划中 |

---

## 6. 用户流程

### 6.1 主流程

```
┌─────────────────────────────────────────────────────────────┐
│                                                             │
│  ① 输入故事        ② 确认章节        ③ 选集制作           │
│  ┌─────────┐      ┌─────────┐      ┌─────────┐            │
│  │ 粘贴    │  →   │ 第1集   │  →   │ 📝编剧  │            │
│  │ 小说    │      │ 第2集   │      │ 🎨美术  │            │
│  │ 文本    │      │ 第3集   │      │ 🎥导演  │            │
│  └─────────┘      │ ...     │      │ 🎵音乐  │            │
│                   └─────────┘      └─────────┘            │
│                                          │                 │
│                                          ▼                 │
│                    ④ 导出            ⑤ 下一集              │
│                   ┌─────────┐      ┌─────────┐            │
│                   │ Excel   │  ←   │ 返回②   │            │
│                   │ JSON    │      │ 选下集  │            │
│                   │ Prompt  │      └─────────┘            │
│                   └─────────┘                              │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### 6.2 单集制作流程

```
编剧部                美术部               导演部               音乐部
  │                    │                    │                    │
  ▼                    ▼                    ▼                    ▼
┌────────┐          ┌────────┐          ┌────────┐          ┌────────┐
│情绪节拍│    →     │人物设定│    →     │分镜方案│    →     │配乐方案│
│60-80个│          │服化道  │          │5合1    │          │三轨    │
│可编辑  │          │可编辑  │          │可编辑  │          │可编辑  │
└────────┘          └────────┘          └────────┘          └────────┘
     │                   │                   │                   │
     ▼                   ▼                   ▼                   ▼
  [确认]              [确认]              [确认]              [确认]
```

---

## 7. 数据结构

### 7.1 全局状态

```javascript
const state = {
    story: String,           // 原始故事文本
    config: {
        directorStyle: String,  // 导演风格
        era: String,            // 时代背景
        duration: Number,       // 每集时长（分钟）
        aspectRatio: String     // 画幅比例
    },
    chapters: [Chapter],     // 章节列表
    episodes: {              // 每集详细数据
        [episodeId]: EpisodeData
    },
    eraDetails: EraDetails   // 时代考据（全局共享）
};
```

### 7.2 章节结构

```javascript
Chapter = {
    id: Number,
    title: String,
    duration: Number,      // 分钟
    charCount: Number,     // 字数
    highlight: String,     // 核心看点
    text: String,          // 章节文本
    completed: Boolean
}
```

### 7.3 镜头结构

```javascript
Shot = {
    id: Number,
    shotId: String,        // E1-S001
    time: String,          // 0:00-0:06
    content: String,       // 镜头内容
    emotion: String,       // 情绪类型
    intensity: Number,     // 1-10
    layer: String,         // narrative/dramatic/emotional
    
    plan: {
        // 分镜
        shotType: String,      // 景别
        movement: String,      // 运镜
        composition: String,   // 构图
        
        // 摄影
        aperture: String,      // 光圈
        focalLength: String,   // 焦段
        
        // 灯光
        keyLight: String,      // 主光
        lightRatio: String,    // 光比
        
        // 调色
        colorTemp: String,     // 色温
        saturation: String,    // 饱和度
        lut: String,           // LUT风格
        
        // 表演
        expression: String,    // 表情
        bodyLanguage: String   // 肢体
    }
}
```

### 7.4 音乐结构

```javascript
MusicTrack = {
    shotId: String,
    
    mainMelody: {
        active: Boolean,
        instruments: String,
        dynamics: String,      // 🔺渐强 🔻渐弱 ⚡突强 🔇静默
        prompt: String
    },
    
    subMelody: {
        active: Boolean,
        instruments: String,
        dynamics: String
    },
    
    ambient: {
        type: String,
        volume: String
    },
    
    transition: String        // ➡️平滑 🔺渐强 etc.
}
```

---

## 8. 技术方案

### 8.1 当前架构（v2）

```
┌─────────────────────────────────────┐
│           前端 (纯静态)              │
│  • HTML + CSS + JavaScript          │
│  • 无框架依赖                        │
│  • 规则引擎模拟AI                    │
└─────────────────────────────────────┘
              │
              ▼
┌─────────────────────────────────────┐
│           部署                       │
│  • python3 -m http.server           │
│  • localhost.run 公网隧道            │
└─────────────────────────────────────┘
```

### 8.2 未来架构（v3）

```
┌─────────────────────────────────────┐
│           前端                       │
│  • React / Vue                       │
│  • 状态管理                          │
│  • 更好的UI组件                      │
└─────────────────────────────────────┘
              │
              ▼
┌─────────────────────────────────────┐
│           后端 API                   │
│  • Node.js / Python                 │
│  • Claude API 集成                   │
│  • 数据库 (项目持久化)               │
└─────────────────────────────────────┘
              │
              ▼
┌─────────────────────────────────────┐
│           AI 服务                    │
│  • Claude (文本分析)                 │
│  • Midjourney (图像生成)             │
│  • Runway/Sora (视频生成)            │
│  • Suno (音乐生成)                   │
└─────────────────────────────────────┘
```

### 8.3 AI接入方案

| 环节 | 调用时机 | 预估Token | 成本控制 |
|------|----------|-----------|----------|
| 分章节 | 每个项目1次 | ~2000 | 低 |
| 人物提取 | 每个项目1次 | ~1000 | 低 |
| 情绪分析 | 每集1次 | ~3000 | 中 |
| 分镜优化 | 可选 | ~5000 | 按需 |

**成本估算**：
- 每集约 $0.05-0.10（使用Claude Haiku）
- 10集番剧约 $0.50-1.00

---

## 9. 产品路线图

### Phase 1: 基础版 ✅
**目标**: 跑通核心流程
- [x] 部门制架构
- [x] 分层处理长剧本
- [x] 情绪节拍系统
- [x] 导演部综合方案
- [x] 音乐三轨系统
- [x] Excel导出

### Phase 2: 智能版 🔜
**目标**: 接入真实AI
- [ ] Claude API 分析故事
- [ ] 智能分章（识别转折点）
- [ ] 人物自动提取
- [ ] 情绪精准分析
- [ ] Prompt质量优化

### Phase 3: 生成版 📋
**目标**: 端到端生成
- [ ] Midjourney 预览图
- [ ] Runway/Kling 视频
- [ ] Suno 配乐
- [ ] 批量导出
- [ ] 项目存档

### Phase 4: 协作版 📋
**目标**: 团队使用
- [ ] 用户账号
- [ ] 项目管理
- [ ] 团队协作
- [ ] 版本历史

---

## 10. 成功指标

### 10.1 核心指标

| 指标 | 目标 | 衡量方式 |
|------|------|----------|
| **分镜速度** | 8分钟剧本 < 3分钟出分镜 | 计时 |
| **镜头数量** | 每分钟8-10个镜头 | 统计 |
| **可用率** | 导出Excel可直接使用 | 用户反馈 |
| **编辑便捷** | 任意字段可编辑 | 功能测试 |

### 10.2 用户反馈指标

| 指标 | 目标 |
|------|------|
| 分章准确度 | 用户认可度 > 80% |
| 情绪识别 | 用户认可度 > 70% |
| Prompt质量 | 生成图像匹配度 > 60% |

---

## 📎 附录

### A. 参考资料
- 电影分镜标准
- 情绪曲线理论
- 三幕剧结构

### B. 竞品分析
- Storyboarder（传统分镜工具）
- Kaiber（AI视频）
- Pika（AI视频）

### C. 术语表
| 术语 | 定义 |
|------|------|
| 情绪节拍 | 5-10秒为单位的情绪变化点 |
| 三层分镜 | 叙事/戏剧/情绪的分类体系 |
| 部门制 | 模拟影视制作的智能体组织方式 |

---

**文档结束**

> 💡 本文档会随产品迭代持续更新
