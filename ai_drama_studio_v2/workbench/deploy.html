<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FizzDragon AI Drama Studio v2</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Noto+Serif+SC:wght@400;600&display=swap');
        *{margin:0;padding:0;box-sizing:border-box}
        :root{--bg:#0a0a0c;--surface:#12121a;--surface2:#1a1a24;--border:#2a2a36;--text:#e8e8ec;--dim:#6b6b7a;--gold:#daa520;--red:#c53030;--cyan:#38b2ac;--pink:#ff6b9d}
        body{font-family:'Inter',system-ui,sans-serif;background:var(--bg);color:var(--text);min-height:100vh}
        .header{background:linear-gradient(180deg,var(--surface) 0%,var(--bg) 100%);border-bottom:1px solid var(--border);padding:20px 32px}
        .header-top{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}
        .logo{font-family:'Noto Serif SC',serif;font-size:28px;color:var(--gold);font-weight:600}
        .logo span{color:var(--dim);font-size:14px;font-family:'Inter';margin-left:12px}
        .btn{padding:10px 20px;border:1px solid var(--border);background:var(--surface2);color:var(--text);border-radius:6px;cursor:pointer;font-size:13px;font-weight:500;transition:all .15s}
        .btn:hover{border-color:var(--gold)}
        .btn-primary{background:var(--gold);border-color:var(--gold);color:#000}
        .stats-bar{display:flex;gap:32px;padding:16px 0;border-top:1px solid var(--border)}
        .stat{text-align:center}
        .stat-val{font-size:32px;font-weight:700;color:var(--gold)}
        .stat-label{font-size:11px;color:var(--dim);text-transform:uppercase;letter-spacing:1px;margin-top:4px}
        .main{display:flex;height:calc(100vh - 160px)}
        .sidebar{width:280px;background:var(--surface);border-right:1px solid var(--border);overflow-y:auto}
        .sidebar-section{padding:16px;border-bottom:1px solid var(--border)}
        .sidebar-section h3{font-size:11px;text-transform:uppercase;letter-spacing:1px;color:var(--dim);margin-bottom:12px}
        .episode-list{list-style:none}
        .episode-item{padding:12px;border-radius:8px;cursor:pointer;margin-bottom:4px;transition:all .15s}
        .episode-item:hover{background:var(--surface2)}
        .episode-item.active{background:var(--gold);color:#000}
        .episode-item .ep-num{font-weight:700;font-size:12px}
        .episode-item .ep-title{font-size:14px;margin-top:2px}
        .episode-item .ep-info{font-size:11px;color:var(--dim);margin-top:4px}
        .episode-item.active .ep-info{color:rgba(0,0,0,0.6)}
        .char-tag{padding:6px 12px;background:var(--surface2);border-radius:20px;font-size:12px;display:inline-block;margin:4px}
        .content{flex:1;overflow-y:auto;padding:24px}
        .episode-header{margin-bottom:24px}
        .episode-header h1{font-family:'Noto Serif SC',serif;font-size:24px;color:var(--gold);margin-bottom:8px}
        .episode-header .logline{color:var(--dim);font-size:14px;line-height:1.6}
        .shot-filters{display:flex;gap:12px;margin-bottom:20px;flex-wrap:wrap}
        .filter-btn{padding:6px 14px;background:var(--surface2);border:1px solid var(--border);border-radius:20px;font-size:12px;cursor:pointer;transition:all .15s}
        .filter-btn:hover,.filter-btn.active{border-color:var(--gold);color:var(--gold)}
        .shot-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:16px}
        .shot-card{background:var(--surface);border:1px solid var(--border);border-radius:12px;overflow:hidden;transition:all .2s}
        .shot-card:hover{border-color:var(--gold);transform:translateY(-2px)}
        .shot-header{padding:12px 16px;border-bottom:1px solid var(--border);display:flex;justify-content:space-between;align-items:center}
        .shot-id{font-weight:700;color:var(--gold);font-size:14px}
        .shot-type{font-size:11px;padding:4px 8px;background:var(--surface2);border-radius:4px}
        .shot-type.narrative{color:var(--cyan)}
        .shot-type.dramatic{color:var(--pink)}
        .shot-type.emotional{color:var(--gold)}
        .shot-body{padding:16px}
        .shot-scene{font-size:12px;color:var(--dim);margin-bottom:8px}
        .shot-desc{font-size:13px;line-height:1.5;margin-bottom:12px}
        .shot-meta{display:flex;gap:8px;flex-wrap:wrap}
        .shot-tag{font-size:10px;padding:3px 8px;background:var(--bg);border-radius:4px;color:var(--dim)}
        .shot-prompt{padding:12px 16px;background:var(--bg);border-top:1px solid var(--border);font-family:monospace;font-size:11px;color:var(--cyan);line-height:1.5;cursor:pointer}
        .shot-prompt:hover{background:var(--surface2)}
        .modal{position:fixed;inset:0;background:rgba(0,0,0,.85);display:flex;align-items:center;justify-content:center;z-index:1000;padding:24px;backdrop-filter:blur(8px)}
        .modal.hide{display:none}
        .modal-box{background:var(--surface);border:1px solid var(--border);border-radius:16px;width:100%;max-width:800px;max-height:85vh;overflow:hidden}
        .modal-header{padding:20px 24px;border-bottom:1px solid var(--border);display:flex;justify-content:space-between;align-items:center}
        .modal-header h2{font-size:18px;font-weight:600}
        .modal-close{background:none;border:none;color:var(--dim);font-size:24px;cursor:pointer}
        .modal-body{padding:24px;overflow-y:auto;max-height:calc(85vh - 140px)}
        .modal-footer{padding:16px 24px;border-top:1px solid var(--border);display:flex;gap:8px;justify-content:flex-end}
        .export-preview{background:var(--bg);border:1px solid var(--border);border-radius:8px;padding:16px;font-family:monospace;font-size:12px;max-height:400px;overflow-y:auto;white-space:pre-wrap}
        .toast{position:fixed;bottom:24px;right:24px;background:var(--gold);color:#000;padding:12px 20px;border-radius:8px;font-size:13px;font-weight:500;opacity:0;transform:translateY(20px);transition:all .3s}
        .toast.show{opacity:1;transform:translateY(0)}
        @media(max-width:768px){.sidebar{display:none}.shot-grid{grid-template-columns:1fr}}
    </style>
</head>
<body>
    <header class="header">
        <div class="header-top">
            <div class="logo">æµ·ä¸Šçµ²ç¶¢ä¹‹è·¯å¯†ç¢¼<span>AIç•ªåŠ‡åˆ†é¡è¡¨ Â· 1000é¡é ­</span></div>
            <div style="display:flex;gap:8px">
                <button class="btn" onclick="exportJSON()">JSON</button>
                <button class="btn" onclick="exportCSV()">CSV</button>
                <button class="btn btn-primary" onclick="exportAll()">å°å‡ºå…¨éƒ¨</button>
            </div>
        </div>
        <div class="stats-bar">
            <div class="stat"><div class="stat-val">10</div><div class="stat-label">é›†æ•¸</div></div>
            <div class="stat"><div class="stat-val">1000</div><div class="stat-label">é¡é ­</div></div>
            <div class="stat"><div class="stat-val">80</div><div class="stat-label">åˆ†é˜</div></div>
            <div class="stat"><div class="stat-val">244</div><div class="stat-label">Skills</div></div>
        </div>
    </header>
    <div class="main">
        <aside class="sidebar">
            <div class="sidebar-section">
                <h3>é›†æ•¸</h3>
                <ul class="episode-list" id="episodeList"></ul>
            </div>
            <div class="sidebar-section">
                <h3>è§’è‰²</h3>
                <div id="charList"></div>
            </div>
        </aside>
        <main class="content" id="content">
            <div class="episode-header" id="epHeader"></div>
            <div class="shot-filters">
                <button class="filter-btn active" data-filter="all">å…¨éƒ¨</button>
                <button class="filter-btn" data-filter="narrative">ğŸ“–æ•˜äº‹</button>
                <button class="filter-btn" data-filter="dramatic">ğŸ¯æˆ²åŠ‡</button>
                <button class="filter-btn" data-filter="emotional">ğŸ¨æƒ…æ„Ÿ</button>
            </div>
            <div class="shot-grid" id="shotGrid"></div>
        </main>
    </div>
    <div class="modal hide" id="exportModal">
        <div class="modal-box">
            <div class="modal-header"><h2>å°å‡ºé è¦½</h2><button class="modal-close" onclick="closeModal()">Ã—</button></div>
            <div class="modal-body"><pre class="export-preview" id="exportPreview"></pre></div>
            <div class="modal-footer"><button class="btn" onclick="closeModal()">é—œé–‰</button><button class="btn btn-primary" onclick="downloadExport()">ä¸‹è¼‰</button></div>
        </div>
    </div>
    <div class="toast" id="toast">å·²è¤‡è£½</div>
<script>
const P={title:"æµ·ä¸Šçµ²ç¶¢ä¹‹è·¯å¯†ç¢¼",episodes:[
{ep:1,title:"è•ƒåŠæš—å½±",shots:100,duration:8,logline:"å°çŒ´å­åœ¨å»£å·è•ƒåŠè¡Œç«Šï¼Œå·å¾—ä¸€é¡†ç¥ç§˜ç²‰ç´…å¯¶çŸ³ï¼Œå»å¼•ç™¼è©­ç•°å¹»è±¡ã€‚"},
{ep:2,title:"å¤œæµ·å•Ÿèˆª",shots:75,duration:6,logline:"å°çŒ´å­ç™»ä¸Šè•ƒé•·çš„å•†èˆ¹ï¼Œè¿½å°‹å°è©è–©è »çš„ä¸‹è½ï¼Œå¤§æµ·çš„å†’éšªé–‹å§‹ã€‚"},
{ep:3,title:"é»‘å¸†ä¾†è¥²",shots:100,duration:8,logline:"æµ·ç›œä¾†è¥²ï¼Œå•†èˆ¹å±åœ¨æ—¦å¤•ã€‚å°çŒ´å­åœ¨è‰™é ‚ç›®ç¹é©šäººä¸€å¹•ã€‚"},
{ep:4,title:"èˆ¹ä¸Šé¢¨é›²",shots:85,duration:7,logline:"å®´æœƒä¹‹å¾Œï¼Œèˆ¹ä¸Šçš„äººæ¥é€£åšèµ·æ€ªå¤¢ã€‚ç²‰ç´…å¯¶çŸ³çš„è©›å’’é–‹å§‹é¡¯ç¾ã€‚"},
{ep:5,title:"å‘½æ¡ˆè¿·éœ§",shots:75,duration:6,logline:"èˆ¹é•·é›¢å¥‡æ­»äº¡ï¼Œèˆ¹ä¸Šäººäººè‡ªå±ã€‚å°çŒ´å­é–‹å§‹èª¿æŸ¥çœŸç›¸ã€‚"},
{ep:6,title:"åº•è‰™è¡€å¤œ",shots:100,duration:8,logline:"åº•è‰™å‚³ä¾†æ…˜å«ï¼Œåˆä¸€äººå€’åœ¨è¡€æ³Šä¸­ã€‚å…‡æ‰‹æ˜¯èª°ï¼Ÿ"},
{ep:7,title:"æµ·è³Šå·¢ç©´",shots:120,duration:10,logline:"å•†èˆ¹é§›å…¥æµ·è³Šçš„åœ°ç›¤ï¼Œå‚³èªªä¸­çš„é£Ÿäººé­”å³¶å°±åœ¨å‰æ–¹ã€‚"},
{ep:8,title:"è•ƒé•·å¾€äº‹",shots:100,duration:8,logline:"è•ƒé•·æ­é–‹éå»çš„ç§˜å¯†ï¼Œè¼ªè¿´çš„è©›å’’èˆ‡ç²‰ç´…å¯¶çŸ³çš„ä¾†æ­·æµ®ç¾ã€‚"},
{ep:9,title:"æ®ºå±€çµ‚ç« ",shots:130,duration:10,logline:"æ‰€æœ‰ç·šç´¢æŒ‡å‘åŒä¸€å€‹äººã€‚å·¨èˆ¶ä¹‹ä¸Šï¼Œç”Ÿæ­»å°æ±ºã€‚"},
{ep:10,title:"çœŸç›¸èˆ‡æ­¸é€”",shots:115,duration:9,logline:"å©†ç¾…æµ®å± çš„ç¥å»Ÿä¸­ï¼ŒçœŸç›¸å¤§ç™½ã€‚å°çŒ´å­æ‰¾åˆ°äº†ä»–è¦æ‰¾çš„äººã€‚"}
],characters:[{name:"å°çŒ´å­"},{name:"å°è©è–©è »"},{name:"è•ƒé•·"},{name:"åœå¤¢å¸«"},{name:"æ³¢æ–¯è²´å©¦"}]};

const S=[
{s:"å åœæ£š",d:["èŒ…è‰æ£šå…§ï¼Œé¦™ç…™ç¹šç¹ï¼Œåœå¤¢å¸«æ‰‹æŒéŠ€éˆ","æ³¢æ–¯è²´å©¦è’™è‘—é»‘ç´—ï¼Œé–‰çœ¼è¬›è¿°å¤¢å¢ƒ","ç²‰ç´…è‰²çš„å…‰å¾å¥¹èƒ¸å£é€å‡ºï¼Œå¦–ç•°èª˜äºº"]},
{s:"æˆ¿æ¢",d:["å°çŒ´å­è—åœ¨èŒ…è‰é–“ï¼Œçœ¼ç›é–ƒçˆå¦‚è²“","ä»–ç·©ç·©æ”¾ä¸‹è‰ç¹©ï¼Œèº«å½¢è¼•ç›ˆå¦‚å½±","å€’æ›ç¹©ç´¢ï¼Œæ‰‹æŒ‡è§¸ç¢°é …éˆæ­æ‰£ï¼Œå±ä½å‘¼å¸"]},
{s:"è•ƒåŠè¡—å··",d:["è¿·å®®èˆ¬çš„å°å··ï¼Œèƒ¡äººèˆ‡æ¼¢äººæ“¦è‚©è€Œé","éœ“è™¹èˆ¬çš„ç‡ˆç± åœ¨å¤œè‰²ä¸­æ–æ›³","ç³ç…æ»¿ç›®çš„è•ƒè²¨ï¼Œé¦™æ–™èˆ‡çµ²ç¶¢"]},
{s:"æ€€åœ£å¯º",d:["å…‰å¡”ä¸‹ï¼Œç´…é«®ç›²è€äººè¬›è¿°æµ·ä¸Šå‚³èªª","ä¸‰ç™¾å¹´çš„è€æ¦•æ¨¹ï¼Œæ¨¹è”­ä¸‹è½çœ¾åœæˆå¹¾åœˆ","é‡‘è‰²å¡”é ‚åœ¨å¤•é™½ä¸‹é–ƒè€€"]},
{s:"æµ·å±±æ¨“",d:["ä¸‰å±¤é–£æ¨“ä¿¯ç°ç æ±Ÿï¼Œé è™•å¸†å½±é»é»","è•ƒé•·èˆ‡å¸‚èˆ¶å¸å®˜å“¡æŠŠé…’è¨€æ­¡","å°çŒ´å­æ½›å…¥æš—è™•ï¼Œå¦‚å¹½éˆèˆ¬è§€å¯Ÿ"]},
{s:"ç¢¼é ­",d:["å¤§è•ƒèˆ¶å¦‚å·¨ç¸ï¼Œè²¨ç‰©å †ç©å¦‚å±±","æ°´æ‰‹å€‘å¿™ç¢Œè£èˆ¹ï¼Œå†å–è²æ­¤èµ·å½¼ä¼","å»£å·åŸåœ¨èº«å¾Œæ¼¸é ï¼Œå†’éšªé–‹å§‹"]},
{s:"ç”²æ¿",d:["å•†èˆ¹ä¹˜é¢¨ç ´æµªï¼Œé¢¨å¸†é¼“èµ·å¦‚ç¿…","å°çŒ´å­ç«™åœ¨èˆ¹é ­ï¼Œçœºæœ›ç„¡å å¤§æµ·","æ—¥è½æŸ“ç´…æµ·é¢ï¼Œå£¯éº—å¦‚ç•«"]},
{s:"èˆ¹è‰™",d:["ç‹¹çª„çš„èˆ¹è‰™ï¼Œå„è‰²äººç­‰æ“ åœ¨ä¸€èµ·","æ²¹ç‡ˆæ–æ›³ï¼Œæš—å½±åœ¨ç‰†ä¸Šèµ·èˆ","æœ‰äººåœ¨è§’è½ä½èªï¼Œå¯†è¬€è‘—ä»€éº¼"]},
{s:"å¤œæµ·",d:["æœˆè¯ç‘è½æµ·é¢ï¼ŒéŠ€æ³¢è•©æ¼¾","é è™•å‡ºç¾é»‘è‰²å¸†å½±ï¼Œä¸ç¥¥çš„é å…†","èˆ¹ä¸Šçš„äººç·Šå¼µå‡è¦–ï¼Œæ‰‹æ¡æ­¦å™¨"]},
{s:"æµ·ç›œèˆ¹",d:["é»‘å¸†çµçµï¼Œéª·é«æ——åœ¨é¢¨ä¸­å¼µæš","æµ·ç›œå€‘å½åˆ€å¯’å…‰ï¼Œè™è¦–çœˆçœˆ","ç”²æ¿ä¸Šåˆ€å…‰åŠå½±ï¼Œæé¬¥æ¿€çƒˆ"]}
];

const T=["å»ºç«‹é¡é ­","é æ™¯","ä¸­æ™¯","ä¸­æ™¯","è¿‘æ™¯","è¿‘æ™¯","ç‰¹å¯«","è·Ÿæ‹","ä¸»è§€é¡é ­"];
const C=["narrative","narrative","narrative","dramatic","dramatic","emotional"];
const E=["ç¥ç§˜","ç·Šå¼µ","æœŸå¾…","ææ‡¼","å¸Œæœ›","éœ‡é©š","æ†¤æ€’","æº«æƒ…","æ‚²å‚·","å …å®š"];

let curEp=1,curShots=[],curFilter='all',expData='',expFile='';

function genShots(ep){
    const e=P.episodes[ep-1],shots=[];
    for(let i=1;i<=e.shots;i++){
        const si=Math.floor((i-1)/(e.shots/7))%S.length;
        const sc=S[si],desc=sc.d[Math.floor(Math.random()*sc.d.length)];
        const em=E[Math.floor(Math.random()*E.length)];
        shots.push({id:i,ep:ep,scene:sc.s,type:T[Math.floor(Math.random()*T.length)],cat:C[Math.floor(Math.random()*C.length)],desc:desc,emo:em,
        prompt:`${desc}, Tang dynasty aesthetic, ${em} mood, cinematic lighting, dramatic shadows, silk road adventure, 8k masterpiece --ar 16:9 --v 6`});
    }
    return shots;
}

function init(){
    document.getElementById('episodeList').innerHTML=P.episodes.map((e,i)=>`<li class="episode-item${i===0?' active':''}" onclick="selEp(${e.ep})"><div class="ep-num">ç¬¬${e.ep}é›†</div><div class="ep-title">${e.title}</div><div class="ep-info">${e.shots}é¡ Â· ${e.duration}åˆ†</div></li>`).join('');
    document.getElementById('charList').innerHTML=P.characters.map(c=>`<span class="char-tag">${c.name}</span>`).join('');
    document.querySelectorAll('.filter-btn').forEach(b=>{b.onclick=()=>{document.querySelectorAll('.filter-btn').forEach(x=>x.classList.remove('active'));b.classList.add('active');curFilter=b.dataset.filter;render();}});
    selEp(1);
}

function selEp(ep){
    curEp=ep;const e=P.episodes[ep-1];
    document.querySelectorAll('.episode-item').forEach((el,i)=>el.classList.toggle('active',i===ep-1));
    document.getElementById('epHeader').innerHTML=`<h1>ç¬¬${ep}é›†ï¼š${e.title}</h1><p class="logline">${e.logline}</p>`;
    curShots=genShots(ep);render();
}

function render(){
    let shots=curFilter==='all'?curShots:curShots.filter(s=>s.cat===curFilter);
    document.getElementById('shotGrid').innerHTML=shots.map(s=>`<div class="shot-card"><div class="shot-header"><span class="shot-id">#${String(s.id).padStart(3,'0')}</span><span class="shot-type ${s.cat}">${s.type}</span></div><div class="shot-body"><div class="shot-scene">ğŸ“ ${s.scene}</div><div class="shot-desc">${s.desc}</div><div class="shot-meta"><span class="shot-tag">${s.cat==='narrative'?'ğŸ“–æ•˜äº‹':s.cat==='dramatic'?'ğŸ¯æˆ²åŠ‡':'ğŸ¨æƒ…æ„Ÿ'}</span><span class="shot-tag">${s.emo}</span></div></div><div class="shot-prompt" onclick="copy(this)">${s.prompt}</div></div>`).join('');
}

function copy(el){navigator.clipboard.writeText(el.textContent);toast('å·²è¤‡è£½Prompt');}
function toast(m){const t=document.getElementById('toast');t.textContent=m;t.classList.add('show');setTimeout(()=>t.classList.remove('show'),2000);}

function getAll(){const a=[];for(let ep=1;ep<=10;ep++){genShots(ep).forEach(s=>{s.epTitle=P.episodes[ep-1].title;a.push(s);});}return a;}

function exportJSON(){
    const all=getAll();
    expData=JSON.stringify({project:P.title,generated:new Date().toISOString(),total:all.length,episodes:P.episodes,storyboard:all},null,2);
    expFile='silkroad_storyboard.json';
    document.getElementById('exportPreview').textContent=expData.substring(0,4000)+'\n...(å…±'+all.length+'é¡é ­)';
    document.getElementById('exportModal').classList.remove('hide');
}

function exportCSV(){
    const all=getAll();
    const h='Shot,Episode,Title,Scene,Type,Category,Description,Emotion,Prompt';
    const r=all.map(s=>[s.id,s.ep,s.epTitle,s.scene,s.type,s.cat,'"'+s.desc.replace(/"/g,'""')+'"',s.emo,'"'+s.prompt.replace(/"/g,'""')+'"'].join(','));
    expData=[h,...r].join('\n');expFile='silkroad_storyboard.csv';
    document.getElementById('exportPreview').textContent=expData.substring(0,4000)+'\n...(å…±'+all.length+'è¡Œ)';
    document.getElementById('exportModal').classList.remove('hide');
}

function exportAll(){
    const all=getAll();
    let txt=`ã€Šæµ·ä¸Šçµ²ç¶¢ä¹‹è·¯å¯†ç¢¼ã€‹AIç•ªåŠ‡åˆ†é¡è¡¨\nç”Ÿæˆï¼š${new Date().toLocaleString()}\nç¸½é¡é ­ï¼š${all.length}\n\n`;
    P.episodes.forEach(ep=>{
        txt+=`${'='.repeat(50)}\nç¬¬${ep.ep}é›†ï¼š${ep.title} (${ep.shots}é¡Â·${ep.duration}åˆ†)\n${ep.logline}\n${'='.repeat(50)}\n\n`;
        all.filter(s=>s.ep===ep.ep).forEach(s=>{txt+=`[#${String(s.id).padStart(3,'0')}] ${s.type} | ${s.scene}\n${s.desc}\næƒ…ç·’ï¼š${s.emo}\nPromptï¼š${s.prompt}\n\n`;});
    });
    expData=txt;expFile='silkroad_full.txt';
    document.getElementById('exportPreview').textContent=txt.substring(0,4000)+'\n...(å®Œæ•´æ–‡æª”)';
    document.getElementById('exportModal').classList.remove('hide');
}

function closeModal(){document.getElementById('exportModal').classList.add('hide');}
function downloadExport(){const b=new Blob([expData],{type:'text/plain;charset=utf-8'});const u=URL.createObjectURL(b);const a=document.createElement('a');a.href=u;a.download=expFile;document.body.appendChild(a);a.click();document.body.removeChild(a);URL.revokeObjectURL(u);closeModal();toast('ä¸‹è¼‰æˆåŠŸ');}

document.addEventListener('DOMContentLoaded',init);
</script>
</body>
</html>
