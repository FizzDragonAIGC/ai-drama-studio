# 🎬 FizzDragon AI番剧系统 - 智能体架构图

## 🏛️ 三层架构总览

```
╔══════════════════════════════════════════════════════════════════════════════════════╗
║                          🎬 FizzDragon AI番剧系统 V2                                  ║
║                                                                                      ║
║  ┌────────────────────────────────────────────────────────────────────────────────┐ ║
║  │                        📋 第一层：核心流程 (8个主智能体)                         │ ║
║  │                                                                                │ ║
║  │    ┌──────┐   ┌──────┐   ┌──────┐   ┌──────┐   ┌──────┐   ┌──────┐   ┌──────┐ │ ║
║  │    │🎤    │   │💡    │   │📑    │   │🎭    │   │🎨    │   │✍️    │   │🎥    │ │ ║
║  │    │访谈师│ → │概念  │ → │章节  │ → │角色  │ → │美术  │ → │编剧  │ → │分镜  │ │ ║
║  │    │      │   │      │   │      │   │      │   │总监  │   │      │   │      │ │ ║
║  │    │5技能 │   │5技能 │   │5技能 │   │5技能 │   │5技能 │   │5技能 │   │5技能 │ │ ║
║  │    └──────┘   └──────┘   └──────┘   └──────┘   └──────┘   └──────┘   └──────┘ │ ║
║  │                                                                                │ ║
║  └────────────────────────────────────────────────────────────────────────────────┘ ║
║                                        ↓ 按需触发                                    ║
║  ┌────────────────────────────────────────────────────────────────────────────────┐ ║
║  │                      🎯 第二层：专业领域 (16个专家智能体)                        │ ║
║  │                                                                                │ ║
║  │  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐  ┌────────────┐│ ║
║  │  │  📝 编剧组 (4)   │  │  🎬 导演组 (4)   │  │  🎨 视觉组 (4)   │  │ 🤖 AI组(4)││ ║
║  │  │                 │  │                 │  │                 │  │            ││ ║
║  │  │ • 中国剧本      │  │ • 光影大师      │  │ • 色彩大师      │  │ • MJ专家   ││ ║
║  │  │ • 好莱坞剧本    │  │ • 运镜大师      │  │ • 特效大师      │  │ • 可灵专家 ││ ║
║  │  │ • 番剧剧本      │  │ • 动作导演      │  │ • 漫画大师      │  │ • 即梦专家 ││ ║
║  │  │ • 短剧剧本      │  │ • 表演指导      │  │ • 场景大师      │  │ • Flux专家 ││ ║
║  │  └─────────────────┘  └─────────────────┘  └─────────────────┘  └────────────┘│ ║
║  │                                                                                │ ║
║  └────────────────────────────────────────────────────────────────────────────────┘ ║
║                                        ↓ 类型特化                                    ║
║  ┌────────────────────────────────────────────────────────────────────────────────┐ ║
║  │                       🎭 第三层：类型片 (12个类型智能体)                         │ ║
║  │                                                                                │ ║
║  │  ┌──────┐┌──────┐┌──────┐┌──────┐┌──────┐┌──────┐┌──────┐┌──────┐┌──────┐    │ ║
║  │  │⚔️动作││🔍悬疑││💕爱情││✨奇幻││🗡️武侠││🌟仙侠││😂喜剧││👻恐怖││💣战争│    │ ║
║  │  └──────┘└──────┘└──────┘└──────┘└──────┘└──────┘└──────┘└──────┘└──────┘    │ ║
║  │  ┌──────┐┌──────┐┌──────┐                                                     │ ║
║  │  │🚀科幻││🔫犯罪││🎭剧情│                                                     │ ║
║  │  └──────┘└──────┘└──────┘                                                     │ ║
║  │                                                                                │ ║
║  └────────────────────────────────────────────────────────────────────────────────┘ ║
║                                                                                      ║
╚══════════════════════════════════════════════════════════════════════════════════════╝
```

---

## 🔄 工作流触发图

```
    ┌─────────────┐
    │ 📖 上传小说  │
    └──────┬──────┘
           ↓
    ┌─────────────┐     
    │ 🎤 访谈智能体│ ← 必触发
    └──────┬──────┘
           ↓
    ┌─────────────┐     ┌───────────────┐
    │ 💡 概念智能体│ ←→ │ 🎭 类型片智能体│ (根据类型)
    └──────┬──────┘     └───────────────┘
           ↓                   
    ┌─────────────┐     
    │ 📑 章节智能体│ ← 必触发
    │  └─ >50集   │ → 批次模式
    └──────┬──────┘
           ↓
    ┌─────────────┐
    │ 🎭 角色智能体│ ← 必触发
    └──────┬──────┘
           ↓
    ┌─────────────┐     ┌───────────────────────────┐
    │ 🎨 美术总监  │ ←→ │ 专业组：                   │
    └──────┬──────┘     │ • 💡 光影大师 (需要光影时)  │
           │            │ • 🎨 色彩大师 (特殊色调时)  │
           │            │ • ✨ 特效大师 (有VFX时)     │
           │            │ • 📖 漫画大师 (漫画风时)    │
           ↓            └───────────────────────────┘
    ┌─────────────┐
    │ 🖼️ 画风选择  │ ← 用户选择55种画风
    └──────┬──────┘
           ↓
    ┌─────────────┐     ┌───────────────────────────┐
    │ ✍️ 编剧智能体│ ←→ │ 文化组：                   │
    └──────┬──────┘     │ • 🇨🇳 中国剧本 (中国故事)   │
           │            │ • 🇺🇸 好莱坞剧本 (西方结构) │
           │            │ • 🇯🇵 番剧剧本 (动画风格)   │
           │            │ • 📱 短剧剧本 (竖屏短剧)   │
           ↓            └───────────────────────────┘
    ┌─────────────┐     ┌───────────────────────────┐
    │ 🎥 分镜智能体│ ←→ │ 导演组：                   │
    └──────┬──────┘     │ • 🎬 运镜大师 (复杂运镜)   │
           │            │ • ⚔️ 动作导演 (打戏)       │
           │            │ • 🎭 表演指导 (情感戏)     │
           ↓            └───────────────────────────┘
    ┌─────────────┐     ┌───────────────────────────┐
    │ 🖼️ Prompt   │ ←→ │ 平台组 (根据目标平台)：     │
    │   生成器    │     │ • MJ专家                  │
    └──────┬──────┘     │ • 可灵专家                │
           │            │ • 即梦专家                │
           │            │ • Flux专家                │
           ↓            └───────────────────────────┘
    ┌─────────────┐
    │  ✅ 完成！   │ → 输出：分镜表 + AI Prompts
    └─────────────┘
```

---

## 📊 Skills合并示意图

```
原来：280个细碎Skills
  ↓
合并后：~100个精华Skills + 9个超级Skills

┌────────────────────────────────────────────────────────────────┐
│                        📝 编剧类合并                           │
│                                                                │
│  screenwriting_mcgee_story  ─┐                                 │
│  screenwriting_save_the_cat  │                                 │
│  screenwriting_syd_field     ├──→ 【script_master_theory】     │
│  screenwriting_sequence      │      编剧理论大师               │
│  screenwriting_premise       │      (3大编剧圣经 + 核心技法)    │
│  screenwriting_conflict     ─┘                                 │
│                                                                │
│  script_action_lines  ───┐                                     │
│  script_flashback        │                                     │
│  script_montage          ├────→ 【script_format_complete】    │
│  script_scene_heading    │        剧本格式完整版               │
│  script_transition      ─┘        (专业剧本格式规范)           │
│                                                                │
└────────────────────────────────────────────────────────────────┘

┌────────────────────────────────────────────────────────────────┐
│                        🎭 角色类合并                           │
│                                                                │
│  character_design_* (18个) ──→ 【character_design_master】    │
│                                  角色设计大师                  │
│                                  (外观+性格+弧线 全流程)        │
│                                                                │
│  character_bible     ───┐                                      │
│  character_appearance   ├──→ 【character_psychology】         │
│  character_relationship │      角色心理完整版                  │
│  pro_character_soul   ──┘      (心理深度 + 关系网络)           │
│                                                                │
└────────────────────────────────────────────────────────────────┘

┌────────────────────────────────────────────────────────────────┐
│                        🎬 导演类合并                           │
│                                                                │
│  directing_* (20个) ────────→ 【directing_master】            │
│                                 导演技法大师                   │
│                                                                │
│  director_kubrick    ───┐                                      │
│  director_wong_karwai   ├──→ 【director_styles】              │
│  director_miyazaki      │      大师风格                        │
│  director_nolan       ──┘      (8位大师的独特风格)             │
│                                                                │
│  cinematography_*   ────────→ 【cinematography_complete】     │
│  camera_*                       摄影完整版                     │
│                                                                │
└────────────────────────────────────────────────────────────────┘
```

---

## 🔢 数量统计

| 类别 | 原数量 | 新数量 |
|------|--------|--------|
| 核心智能体 | 8 | 8 |
| 专业智能体 | 0 | 16 |
| 类型智能体 | 0 | 12 |
| **智能体总计** | **31** | **36** |
| | | |
| Skills | 280 | ~100 |
| 超级Skills | 0 | 9 |
| **Skills总计** | **280** | **~110** |

---

## ✅ 优势

1. **每个智能体只需5个skill** → 满足maxSkills限制
2. **专业分工明确** → 中国剧本/好莱坞剧本/番剧 各有专家
3. **按需触发** → 不需要的智能体不加载，节省token
4. **层级清晰** → 第一层处理流程，第二层深度专业，第三层类型优化
5. **Skills精简** → 280个 → 110个，减少60%，但更强
